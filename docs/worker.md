<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# worker

```go
import "github.com/swift-conductor/conductor-client-golang/sdk/worker"
```

## Index

- [type TaskRunner](<#TaskRunner>)
  - [func NewTaskRunner\(httpSettings \*settings.HttpSettings\) \*TaskRunner](<#NewTaskRunner>)
  - [func NewTaskRunnerWithApiClient\(apiClient \*client.APIClient\) \*TaskRunner](<#NewTaskRunnerWithApiClient>)
  - [func \(c \*TaskRunner\) DecreaseBatchSize\(taskName string, batchSize int\) error](<#TaskRunner.DecreaseBatchSize>)
  - [func \(c \*TaskRunner\) GetBatchSizeForAll\(\) \(batchSizeByTaskName map\[string\]int\)](<#TaskRunner.GetBatchSizeForAll>)
  - [func \(c \*TaskRunner\) GetBatchSizeForTask\(taskName string\) \(batchSize int\)](<#TaskRunner.GetBatchSizeForTask>)
  - [func \(c \*TaskRunner\) GetPollIntervalForTask\(taskName string\) \(pollInterval time.Duration, err error\)](<#TaskRunner.GetPollIntervalForTask>)
  - [func \(c \*TaskRunner\) IncreaseBatchSize\(taskName string, batchSize int\) error](<#TaskRunner.IncreaseBatchSize>)
  - [func \(c \*TaskRunner\) Pause\(taskName string\)](<#TaskRunner.Pause>)
  - [func \(c \*TaskRunner\) Resume\(taskName string\)](<#TaskRunner.Resume>)
  - [func \(c \*TaskRunner\) SetBatchSize\(taskName string, batchSize int\) error](<#TaskRunner.SetBatchSize>)
  - [func \(c \*TaskRunner\) SetPollIntervalForTask\(taskName string, pollInterval time.Duration\) error](<#TaskRunner.SetPollIntervalForTask>)
  - [func \(c \*TaskRunner\) SetSleepOnGenericError\(duration time.Duration\)](<#TaskRunner.SetSleepOnGenericError>)
  - [func \(c \*TaskRunner\) StartWorker\(taskName string, executeFunction model.ExecuteTaskFunction, batchSize int, pollInterval time.Duration\) error](<#TaskRunner.StartWorker>)
  - [func \(c \*TaskRunner\) StartWorkerWithDomain\(taskName string, executeFunction model.ExecuteTaskFunction, batchSize int, pollInterval time.Duration, domain string\) error](<#TaskRunner.StartWorkerWithDomain>)
  - [func \(c \*TaskRunner\) WaitWorkers\(\)](<#TaskRunner.WaitWorkers>)


<a name="TaskRunner"></a>
## type [TaskRunner](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L48-L64>)

TaskRunner implements polling and execution logic for a Conductor worker. Every polling interval, each running task attempts to retrieve a from Conductor. Multiple tasks can be started in parallel. All Goroutines started by this worker cannot be stopped, only paused and resumed.

Conductor tasks are tracked by name separately. Each TaskRunner tracks a separate poll interval and batch size for each task, which is shared by all workers running that task. For instance, if task "foo" is running with a batch size of n, and k workers, the average number of tasks retrieved during each polling interval is n\*k.

All methods on TaskRunner are thread\-safe.

```go
type TaskRunner struct {
    // contains filtered or unexported fields
}
```

<a name="NewTaskRunner"></a>
### func [NewTaskRunner](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L67>)

```go
func NewTaskRunner(httpSettings *settings.HttpSettings) *TaskRunner
```

NewTaskRunner returns a new TaskRunner using the provided settings.

<a name="NewTaskRunnerWithApiClient"></a>
### func [NewTaskRunnerWithApiClient](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L76-L78>)

```go
func NewTaskRunnerWithApiClient(apiClient *client.APIClient) *TaskRunner
```

NewTaskRunnerWithApiClient creates a new TaskRunner which uses the provided client.APIClient to communicate with Conductor.

<a name="TaskRunner.DecreaseBatchSize"></a>
### func \(\*TaskRunner\) [DecreaseBatchSize](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L164>)

```go
func (c *TaskRunner) DecreaseBatchSize(taskName string, batchSize int) error
```

DecreaseBatchSize decreases the batch size used for all workers running the provided task.

<a name="TaskRunner.GetBatchSizeForAll"></a>
### func \(\*TaskRunner\) [GetBatchSizeForAll](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L514>)

```go
func (c *TaskRunner) GetBatchSizeForAll() (batchSizeByTaskName map[string]int)
```

GetBatchSizeForAll returns a map from taskName to batch size for all batch sizes currently registered with this TaskRunner.

<a name="TaskRunner.GetBatchSizeForTask"></a>
### func \(\*TaskRunner\) [GetBatchSizeForTask](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L525>)

```go
func (c *TaskRunner) GetBatchSizeForTask(taskName string) (batchSize int)
```

GetBatchSizeForTask retrieves the current batch size for the provided task.

<a name="TaskRunner.GetPollIntervalForTask"></a>
### func \(\*TaskRunner\) [GetPollIntervalForTask](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L502>)

```go
func (c *TaskRunner) GetPollIntervalForTask(taskName string) (pollInterval time.Duration, err error)
```

GetPollIntervalForTask retrieves the poll interval for all tasks running the provided taskName. An error is returned if no pollInterval has been registered for the provided task.

<a name="TaskRunner.IncreaseBatchSize"></a>
### func \(\*TaskRunner\) [IncreaseBatchSize](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L141>)

```go
func (c *TaskRunner) IncreaseBatchSize(taskName string, batchSize int) error
```

IncreaseBatchSize increases the batch size used for all workers running the provided task.

<a name="TaskRunner.Pause"></a>
### func \(\*TaskRunner\) [Pause](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L190>)

```go
func (c *TaskRunner) Pause(taskName string)
```

Pause pauses all workers running the provided task. When paused, workers will not poll for new tasks and no new goroutines are started. However it does not stop any goroutines running. Workers must be resumed at a later time using Resume. Failing to call \`Resume\(\)\` on a TaskRunner running one or more workers can result in a goroutine leak.

<a name="TaskRunner.Resume"></a>
### func \(\*TaskRunner\) [Resume](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L198>)

```go
func (c *TaskRunner) Resume(taskName string)
```

Resume all running workers for the provided taskName. If workers for the provided task are not paused, calling this method has no impact.

<a name="TaskRunner.SetBatchSize"></a>
### func \(\*TaskRunner\) [SetBatchSize](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L116>)

```go
func (c *TaskRunner) SetBatchSize(taskName string, batchSize int) error
```

SetBatchSize can be used to set the batch size for all workers running the provided task.

<a name="TaskRunner.SetPollIntervalForTask"></a>
### func \(\*TaskRunner\) [SetPollIntervalForTask](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L492>)

```go
func (c *TaskRunner) SetPollIntervalForTask(taskName string, pollInterval time.Duration) error
```

SetPollIntervalForTask sets the pollInterval for all workers running the task with the provided taskName.

<a name="TaskRunner.SetSleepOnGenericError"></a>
### func \(\*TaskRunner\) [SetSleepOnGenericError](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L93>)

```go
func (c *TaskRunner) SetSleepOnGenericError(duration time.Duration)
```

SetSleepOnGenericError Sets the time for which to wait before continuing to poll/execute when there is an error Default is 200 millis, and this function can be used to increase/decrease the duration of the wait time Useful to avoid excessive logs in the worker when there are intermittent issues

<a name="TaskRunner.StartWorker"></a>
### func \(\*TaskRunner\) [StartWorker](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L111>)

```go
func (c *TaskRunner) StartWorker(taskName string, executeFunction model.ExecuteTaskFunction, batchSize int, pollInterval time.Duration) error
```

StartWorker starts a worker on a new goroutine, which polls conductor periodically for tasks matching the provided taskName and, if any are available, uses executeFunction to run them on a separate goroutine. Each call to StartWorker starts a new goroutine which performs batch polling to retrieve as many tasks from Conductor as are available, up to the batchSize set for the task. This func additionally sets the pollInterval and increases the batch size for the task, which applies to all tasks shared by this TaskRunner with the same taskName.

<a name="TaskRunner.StartWorkerWithDomain"></a>
### func \(\*TaskRunner\) [StartWorkerWithDomain](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L101>)

```go
func (c *TaskRunner) StartWorkerWithDomain(taskName string, executeFunction model.ExecuteTaskFunction, batchSize int, pollInterval time.Duration, domain string) error
```

StartWorkerWithDomain starts a polling worker on a new goroutine, which only polls for tasks using the provided domain. Equivalent to:

```
StartWorkerWithDomain(taskName, executeFunction, batchSize, pollInterval, "")
```

<a name="TaskRunner.WaitWorkers"></a>
### func \(\*TaskRunner\) [WaitWorkers](<https://github.com/vkantchev/conductor-client-golang/blob/main/sdk/worker/task_runner.go#L212>)

```go
func (c *TaskRunner) WaitWorkers()
```

WaitWorkers uses an internal waitgroup to block the calling thread until all workers started by this TaskRunner have been stopped.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
